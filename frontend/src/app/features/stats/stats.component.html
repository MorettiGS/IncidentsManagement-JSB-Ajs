<div class="stats-root">
  <ng-container *ngIf="loading">
    <div class="spinner-wrap">
      <mat-spinner diameter="48"></mat-spinner>
    </div>
  </ng-container>

  <ng-container *ngIf="!loading && error">
    <mat-card class="error-card">
      <mat-card-content>{{ error }}</mat-card-content>
    </mat-card>
  </ng-container>

  <ng-container *ngIf="!loading && !error">
    <div class="cards">
      <mat-card class="stat-card total-card">
        <mat-card-content class="card-content">
          <div class="card-title">Total</div>
          <div class="big-number">{{ total }}</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content class="card-content">
          <div class="card-title">Por status</div>
          <div class="list-wrap">
            <ng-container *ngIf="entries(stats.byStatus).length; else emptyStatus">
              <div class="stat-row" *ngFor="let kv of entries(stats.byStatus)">
                <div class="stat-key">{{ kv[0] }}</div>
                <div class="stat-val"><span class="pill">{{ kv[1] }}</span></div>
              </div>
            </ng-container>
            <ng-template #emptyStatus>
              <div class="empty">Nenhum dado</div>
            </ng-template>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content class="card-content">
          <div class="card-title">Por prioridade</div>
          <div class="list-wrap">
            <ng-container *ngIf="entries(stats.byPriority).length; else emptyPriority">
              <div class="stat-row" *ngFor="let kvv of entries(stats.byPriority)">
                <div class="stat-key">{{ kvv[0] }}</div>
                <div class="stat-val"><span class="pill">{{ kvv[1] }}</span></div>
              </div>
            </ng-container>
            <ng-template #emptyPriority>
              <div class="empty">Nenhum dado</div>
            </ng-template>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </ng-container>
</div>
